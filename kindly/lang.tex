\section{The \lang language}

\subsection{Syntax}

The syntax of \lang is presented in \cref{grammar} and follows
traditional ML languages with let bindings.
Data constructors are introduced by $\introK{K}{e}$ and eliminated
with by $\elimK{K}{e}$.
Types are composed of type variable $\tvar$, parameterized type constructors
$\T{t}$ and arrow types annotated with a kind, noted $\tau \tarr{k} \tau$.
Kinds can be either a kind variable $\kvar$, affine $\kaff$ or unrestricted $\kun$.
Type schemes and kind schemes are guarded by a set of constraints.

Environments are composed of value and type bindings, along with type
declarations. Type declarations, of the form
$\tydecl{t}{\kschm}{K}{\tau}$, introduce both a new type constructor $\T{t}$ and
a data constructor $K$.

\begin{figure*}[t]
  \centering
  \input{grammar}
  \caption{Syntax}
  \label{grammar}
\end{figure*}
\input{internal-grammar}

\subsection{Semantics}
\input{fig-reduction}


\subsection{Typing}

\TODO{Add system-F like type rules}

\begin{figure*}[!h]
  \centering
  \begin{minipage}{0.45\linewidth}
    \begin{align*}
      % \tregion{\Ctrue&}{y}{\bvar{x}{\kvar}}{\bvar{x}{\kvar}}&\text{ when } x \neq y\\
      \tregion{\Ctrue&}{y}
        {\bshadow{x}}{\bshadow{x}}&\text{ when } x \neq y\\
      \tregion{(\kun_n\lk\kvar\lk\kun_\infty)&}{x}
        {\bshadow[i]{x}}{\bvar{\borrow[i]{x}}{\kvar}}\\
      \tregion{(\kaff_n\lk\kvar\lk\kaff_\infty)&}{x}
        {\bshadow[m]{x}}{\bvar{\borrow[m]{x}}{\kvar}}
    \end{align*}
    \caption{Borrowing}
    \label{typesplit}
  \end{minipage}
\end{figure*}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
