\section{The \lang language}

\subsection{Syntax}

The syntax of \lang is presented in \cref{grammar} and follows
traditional ML languages with let bindings.
Data constructors are introduced by $\introK{K}{e}$ and eliminated
with by $\elimK{K}{e}$.
Types are composed of type variable $\tvar$, parameterized type constructors
$\T{t}$ and arrow types annotated with a kind, noted $\tau \tarr{k} \tau$.
Kinds can be either a kind variable $\kvar$, affine $\kaff$ or unrestricted $\kun$.
Type schemes and kind schemes are guarded by a set of constraints.

Environments are composed of value and type bindings, along with type
declarations. Type declarations, of the form
$\tydecl{t}{\kschm}{K}{\tau}$, introduce both a new type constructor $\T{t}$ and
a data constructor $K$.

\begin{figure*}[t]
  \centering
  \input{grammar}
  \caption{Syntax}
  \label{grammar}
\end{figure*}

\subsection{Semantics}
\input{fig-reduction}


\subsection{Typing}

\TODO{Add system-F like type rules}

\begin{figure*}[!h]
  \centering
  \begin{align*}
    \tsplit{&}{\bvar{x}{\kvar}}{\bvar{x}{\kvar}}{\Cempty}\\
    \tsplit{&}{\bvar{x}{\kvar}}{\Cempty}{\bvar{x}{\kvar}}\\
    \tsplit{&}{\bvar{\borrow[i]{x}}{k}}
              {\bvar{\borrow[i]{x}}{k}}{\bvar{\borrow[i]{x}}{k}}\\
    \tsplit{\Cleq{k}{\kun_\infty}&}{\bvar{x}{k}}{\bvar{x}{k}}{\bvar{x}{k}}
  \end{align*}
  \caption{Type splitting}
  \label{typesplit}
  \begin{align*}
    \tregion{&}{\bvar{x}{\kvar}}{\bvar{x}{\kvar}}\\
    \tregion{&}{\bvar{x}{\kvar}}{\bvar{\borrow{x}}{\kvar}}\\
    \tregion{&}{\bvar{\borrow{x}}{\kvar}}{\bvar{\borrow[i]{x}}{\kvar}}
  \end{align*}
  \caption{Borrowing}
  \label{typesplit}
\end{figure*}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
